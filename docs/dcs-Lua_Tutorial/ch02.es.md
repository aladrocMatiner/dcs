# CapÃ­tulo 02 â€” Pipeline, configuraciÃ³n y librerÃ­as comunes de Lua en DCS (VS Code)

ğŸ‡¬ğŸ‡§ [English](ch02.md) | ğŸ‡ªğŸ‡¸ **EspaÃ±ol** | ğŸ‡¸ğŸ‡ª [Svenska](ch02.sv.md) | ğŸ‡«ğŸ‡® [Suomi](ch02.fi.md)

Volver al Ã­ndice: [README.es.md](README.es.md)

## Objetivo

Montar un workflow (â€œpipelineâ€) prÃ¡ctico para trabajar cÃ³modo con scripting de misiones en DCS usando **Visual Studio Code**, y entender las librerÃ­as/ecosistemas mÃ¡s habituales de Lua en DCS.

Este capÃ­tulo sigue siendo **poco orientado a cÃ³digo**. El resultado principal es: â€œsÃ© cÃ³mo voy a trabajarâ€.

## El pipeline (autor â†’ empaquetar â†’ ejecutar â†’ observar â†’ iterar)

Piensa en el scripting como un bucle:

1. **AutorÃ­a**: escribir/editar en VS Code (feedback rÃ¡pido, bÃºsqueda, control de versiones).
2. **Empaquetado**: incluir scripts (y librerÃ­as) en la misiÃ³n que vas a ejecutar.
3. **EjecuciÃ³n**: lanzar la misiÃ³n en DCS.
4. **ObservaciÃ³n**: confirmar que los cambios se notan (mensajes, comportamiento, logs).
5. **IteraciÃ³n**: ajustar una cosa cada vez hasta que haga lo que quieres.

El error tÃ­pico es intentar â€œterminar toda la lÃ³gicaâ€ antes de tener un bucle fiable. Primero construye el bucle.

## QuÃ© hay que â€œinstalarâ€ (y quÃ© no)

### Para ejecutar Lua en DCS

Normalmente **no** necesitas instalar Lua para *ejecutar* scripts en DCS.

DCS ejecuta el scripting de misiÃ³n con su propio runtime de Lua integrado cuando usas triggers del Editor de Misiones (por ejemplo `DO SCRIPT` / `DO SCRIPT FILE`).

### Para trabajar cÃ³modo (tooling local opcional)

El tooling local es para **escribir mejor**, no para ejecutar dentro de DCS:

- **VS Code + language server de Lua**: diagnÃ³sticos, autocompletado, navegaciÃ³n.
- **Formateador** (opcional): estilo consistente para que los diffs sean legibles.
- **IntÃ©rprete de Lua** (opcional): pequeÃ±as pruebas offline.

Si instalas Lua localmente, Ãºsalo como â€œmodo prÃ¡cticaâ€. DCS sigue ejecutando en su propio entorno, asÃ­ que verifica siempre en el juego.

## Setup de VS Code (prÃ¡ctico)

### 1) Instala una extensiÃ³n de Lua / language server

En VS Code, busca una extensiÃ³n que ofrezca:

- Resaltado de sintaxis
- DiagnÃ³sticos
- Autocompletado (funcionalidad de language server)

Busca soporte de â€œLua Language Serverâ€. Hay varias opciones; lo importante es que tenga language server.

### 2) Elige una estructura de carpetas simple

Ejemplo:

- `scripts/` â€” tu cÃ³digo de misiÃ³n
- `libs/` â€” librerÃ­as de terceros (MIST/MOOSE/etc.)
- `missions/` â€” la `.miz` que ejecutas (o notas de quÃ© misiÃ³n editas)
- `notes/` â€” notas, TODOs, checklists

La misiÃ³n es tu â€œcontenedor de runtimeâ€; la carpeta es tu â€œfuente de verdadâ€.

### 3) Estrategia de formato (aburrida y consistente)

Elige un estilo de indentaciÃ³n y mantÃ©nlo. El objetivo no es â€œbonitoâ€, es:

- Diffs claros
- Menos errores â€œinvisiblesâ€
- Mejor colaboraciÃ³n

Si usas un formateador, intenta no mezclar â€œsolo formatoâ€ con cambios de lÃ³gica en el mismo commit/ediciÃ³n.

## API de DCS vs librerÃ­as de la comunidad

Hay dos â€œmundosâ€:

### DCS: scripting integrado

Es el entorno que existe dentro de las misiones y aporta los bloques bÃ¡sicos:

- Eventos (cosas que pasan)
- Timers / chequeos periÃ³dicos
- MensajerÃ­a
- Acceso a objetos de misiÃ³n (unidades, grupos, coaliciones, zonas) segÃºn lo que exponga DCS

### LibrerÃ­as / frameworks de la comunidad

Paquetes Lua de terceros para no reescribir patrones comunes y construir lÃ³gica compleja mÃ¡s rÃ¡pido.

Suelen aportar:

- Abstracciones de mÃ¡s alto nivel (tasking, spawning, gestiÃ³n de IA)
- Utilidades (buscar unidades, estado, scheduling)
- Sistemas reutilizables (logÃ­stica, IADS, scoring)

## LibrerÃ­as/frameworks comunes en DCS (visiÃ³n conceptual)

### MIST (Mission Scripting Tools)

Suele usarse como capa de utilidades:

- Funciones Ãºtiles y patrones comunes
- Ãštil si quieres estar cerca de â€œLua normalâ€ sin tanto boilerplate

### MOOSE (Mission Object Oriented Scripting Environment)

MÃ¡s orientado a framework:

- Ayuda a estructurar misiones grandes con muchas piezas
- Ãštil si quieres conceptos de alto nivel y lÃ³gica reutilizable

### Otros add-ons (categorÃ­as)

SegÃºn el tipo de misiÃ³n, verÃ¡s:

- **Sistemas IADS** (defensa aÃ©rea integrada)
- **LogÃ­stica / transporte de tropas**
- **Herramientas de admin** para multiplayer (mensajes, utilidades)

Ãšsalos cuando tu pipeline sea estable.

## CuÃ¡ndo usar triggers vs Lua vs librerÃ­as

HeurÃ­stica:

- Comportamiento simple/estÃ¡tico: **triggers del Editor** suelen bastar.
- Flujo dinÃ¡mico, estado, bifurcaciones, chequeos repetidos: **Lua** ayuda.
- Escenario complejo con muchos sistemas: **librerÃ­as/frameworks** ahorran tiempo, pero aÃ±aden dependencias y mantenimiento.

## Checklist: â€œmi pipeline estÃ¡ listoâ€

- [ ] Tengo VS Code instalado y una extensiÃ³n con Lua language server activa.
- [ ] Tengo estructura de carpetas (`scripts/`, `libs/`, etc.) y encuentro rÃ¡pido los archivos.
- [ ] SÃ© cÃ³mo voy a incluir scripts en una misiÃ³n (`DO SCRIPT` / `DO SCRIPT FILE`).
- [ ] Tengo un plan para verificar cambios (mensajes/logs/comportamiento observable).
- [ ] SÃ© quÃ© quiero explorar despuÃ©s (Lua â€œvanillaâ€, MIST, o MOOSE).

## Siguiente

En el prÃ³ximo capÃ­tulo escribiremos los scripts mÃ­nimos Ãºtiles y construiremos un bucle fiable de â€œcambio â†’ ejecutar â†’ verificarâ€ con el mÃ­nimo de cÃ³digo.

