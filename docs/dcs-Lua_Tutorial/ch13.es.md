# CapÃ­tulo 13 â€” Orden y estructura: `MyMission` + config + lÃ³gica (sin caos)

ğŸ‡¬ğŸ‡§ [English](ch13.md) | ğŸ‡ªğŸ‡¸ **EspaÃ±ol** | ğŸ‡¸ğŸ‡ª [Svenska](ch13.sv.md) | ğŸ‡«ğŸ‡® [Suomi](ch13.fi.md)

Volver al Ã­ndice: [README.es.md](README.es.md)

Ejemplo del capÃ­tulo: [examples/ex13_namespace_structure.lua](examples/ex13_namespace_structure.lua)

## QuÃ© vas a aprender

- Por quÃ© tu script necesita â€œordenâ€ en cuanto crece un poco.
- El patrÃ³n de namespace: `MyMission = MyMission or {}`.
- Separar `CFG` (config) de `state` (estado).
- CÃ³mo llamar funciones desde otros triggers sin perderte.

## CÃ³mo se usa en DCS

Problema tÃ­pico:

- Al principio tienes 10 lÃ­neas.
- Luego tienes 300.
- Y de repente no sabes quÃ© variable es cuÃ¡l.

SoluciÃ³n prÃ¡ctica:

- Un **solo** nombre global controlado: `MyMission`.
- Dentro, guardas:
  - `MyMission.CFG` (config)
  - `MyMission.state` (estado)
  - `MyMission.funciones` (funciones)

El resto, todo `local`.

## Prueba rÃ¡pida (paso a paso)

1) Carga al inicio: [examples/ex13_namespace_structure.lua](examples/ex13_namespace_structure.lua)
2) Ejecuta la misiÃ³n.
3) VerÃ¡s un mensaje con â€œMyMission boots: Xâ€.

## Errores tÃ­picos y soluciÃ³n

- **No encuentro `MyMission`**:
  - AsegÃºrate de que el script se ejecuta en `MISSION START`.
- **Se ejecuta varias veces**:
  - Si lo pones en varios triggers, verÃ¡s que `boots` sube.
  - Para â€œinitâ€, suele ser 1 vez.

> **Si te sale error, haz esto:**
> - Empieza solo con:
>   - `MyMission = MyMission or {}`
>   - `trigger.action.outText("MyMission listo", 10)`

## Miniâ€‘lab (20â€“30 min): un botÃ³n F10 que llama a `MyMission.status()`

Objetivo: usar el patrÃ³n â€œscript cargadoâ€ + â€œotro trigger llama a una funciÃ³nâ€.

1) Carga `ex13_namespace_structure.lua` en `MISSION START`.
2) Crea un trigger nuevo con acciÃ³n `DO SCRIPT` y pega:

```lua
if MyMission and MyMission.status then
  MyMission.status()
else
  trigger.action.outText("MyMission aÃºn no estÃ¡ listo", 10)
end
```

3) Dispara ese trigger con una condiciÃ³n simple (por ejemplo `TIME MORE (15)`).
4) Ejecuta y confirma que vuelve a salir el status.

## Checklist (debe verse en el juego)

- Al inicio aparece â€œMyMission boots: 1â€.
- A los 15 segundos, aparece otra vez â€œMyMission boots: 1â€ (status).
- No hay â€œnilâ€ ni errores.

## NavegaciÃ³n

Anterior: [CapÃ­tulo 12](ch12.es.md)  
Siguiente: [CapÃ­tulo 14](ch14.es.md)
