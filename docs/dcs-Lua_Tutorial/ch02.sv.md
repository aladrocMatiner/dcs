# Kapitel 02 â€” Pipeline, setup och vanliga DCS Luaâ€‘bibliotek (VS Code)

ğŸ‡¬ğŸ‡§ [English](ch02.md) | ğŸ‡ªğŸ‡¸ [EspaÃ±ol](ch02.es.md) | ğŸ‡¸ğŸ‡ª **Svenska** | ğŸ‡«ğŸ‡® [Suomi](ch02.fi.md)

Till index: [README.sv.md](README.sv.md)

## MÃ¥l

Skapa en praktisk pipeline fÃ¶r DCSâ€‘uppdragsscriptning med **Visual Studio Code**, och fÃ¥ en Ã¶verblick Ã¶ver de vanligaste Luaâ€‘biblioteken/ekosystemen som anvÃ¤nds i DCS.

Det hÃ¤r kapitlet Ã¤r fortfarande **lÃ¤tt pÃ¥ kod**. Huvudresultatet Ã¤r: â€œjag vet hur jag ska arbetaâ€.

## Pipeline (fÃ¶rfatta â†’ paketera â†’ kÃ¶ra â†’ observera â†’ iterera)

Se scriptning som en loop:

1. **FÃ¶rfatta**: skriv/redigera i VS Code (snabb feedback, sÃ¶k, versionshantering).
2. **Paketera**: lÃ¤gg in scripts (och bibliotek) i uppdraget du ska kÃ¶ra.
3. **KÃ¶ra**: starta uppdraget i DCS.
4. **Observera**: bekrÃ¤fta att Ã¤ndringen syns (meddelanden, beteende, loggar).
5. **Iterera**: justera en sak i taget tills det stÃ¤mmer.

NybÃ¶rjarmisstaget Ã¤r att fÃ¶rsÃ¶ka â€œbygga alltâ€ innan loopen fungerar. Bygg loopen fÃ¶rst.

## Vad du behÃ¶ver â€œinstalleraâ€ (och vad du inte behÃ¶ver)

### FÃ¶r att kÃ¶ra Lua i DCS

Du behÃ¶ver oftast **inte** installera Lua fÃ¶r att *kÃ¶ra* uppdragsscript i DCS.

DCS kÃ¶r uppdragsscriptning med sin egen inbÃ¤ddade Luaâ€‘runtime nÃ¤r du anvÃ¤nder Mission Editorâ€‘triggers (t.ex. `DO SCRIPT` / `DO SCRIPT FILE`).

### FÃ¶r att jobba bekvÃ¤mt (valfria verktyg lokalt)

Lokala verktyg Ã¤r fÃ¶r **fÃ¶rfattande**, inte fÃ¶r exekvering i DCS:

- **VS Code + Lua language server**: diagnoser, autocomplete, navigation.
- **Formatterare** (valfritt): konsekvent stil fÃ¶r lÃ¤sbara diffar.
- **Luaâ€‘tolk** (valfritt): smÃ¥ offlineâ€‘tester.

Om du installerar Lua lokalt: se det som â€œÃ¶vningslÃ¤geâ€. DCS kÃ¶r Ã¤ndÃ¥ i sin egen miljÃ¶, sÃ¥ verifiera alltid i spelet.

## VS Codeâ€‘setup (praktiskt)

### 1) Installera Luaâ€‘extension / language server

I VS Code (eller VSCodium om du fÃ¶redrar en fri variant), vÃ¤lj en Luaâ€‘extension som ger:

- Syntax highlighting
- Diagnoser
- Autocomplete (language serverâ€‘funktioner)

SÃ¶k efter stÃ¶d fÃ¶r â€œLua Language Serverâ€.

Rekommendation (vanligast): installera **â€œLuaâ€** som anvÃ¤nder **Lua Language Server** (servern `sumneko.lua`). Mer info: https://marketplace.visualstudio.com/items?itemName=sumneko.lua.

### 2) VÃ¤lj en enkel mappstruktur

Exempel:

- `scripts/` â€” din uppdragskod
- `libs/` â€” tredjepartsbibliotek (MIST/MOOSE/etc.)
- `missions/` â€” `.miz` du kÃ¶r (eller anteckningar)
- `notes/` â€” designnoter och TODOs

Uppdraget Ã¤r din â€œruntimeâ€‘containerâ€; mappen Ã¤r din â€œsource of truthâ€.

### 3) Formatering (konsekvent och trÃ¥kigt)

VÃ¤lj en konsekvent indentering och hÃ¥ll dig till den. MÃ¥let Ã¤r:

- Tydliga diffar
- FÃ¤rre â€œosynligaâ€ misstag
- Enklare samarbete

Om du anvÃ¤nder formatterare: undvik att blanda stora formateringsÃ¤ndringar med logikÃ¤ndringar.

## DCSâ€‘API vs communityâ€‘bibliotek

TvÃ¥ vÃ¤rldar:

### Inbyggd DCSâ€‘scriptning

Ger grundblock:

- HÃ¤ndelser
- Timers / periodiska kontroller
- Meddelanden
- Ã…tkomst till uppdragsobjekt (enheter, grupper, koalitioner, zoner) enligt vad DCS exponerar

### Communityâ€‘bibliotek / ramverk

Tredjepartspaket som hjÃ¤lper dig undvika att uppfinna hjulet:

- HÃ¶gre nivÃ¥â€‘abstraktioner (tasking, spawning, AIâ€‘mÃ¶nster)
- Utilities (sÃ¶k, tillstÃ¥nd, scheduling)
- Ã…teranvÃ¤ndbara system (logistik, IADS, scoring)

## Vanliga bibliotek/ramverk i DCS (koncept)

### MIST (Mission Scripting Tools)

Ofta en utilityâ€‘nivÃ¥:

- HjÃ¤lpfunktioner och vanliga mÃ¶nster
- Bra om du vill vara nÃ¤ra â€œvanlig DCSâ€‘Luaâ€ men slippa boilerplate

### MOOSE (Mission Object Oriented Scripting Environment)

Mer av ett ramverk:

- Struktur fÃ¶r stÃ¶rre uppdrag med mÃ¥nga delar
- HÃ¶gre nivÃ¥â€‘koncept och Ã¥teranvÃ¤ndbar logik

### Andra addâ€‘ons (kategorier)

Du kan Ã¤ven se:

- **IADSâ€‘system**
- **Logistik / trupptransport**
- **Adminâ€‘verktyg** fÃ¶r multiplayer

InfÃ¶r dem nÃ¤r din pipeline Ã¤r stabil.

## NÃ¤r ska du anvÃ¤nda triggers vs Lua vs bibliotek?

Heuristik:

- Enkelt/statiskt: **Mission Editorâ€‘triggers** rÃ¤cker ofta.
- Dynamiskt flÃ¶de, tillstÃ¥nd, fÃ¶rgreningar: **Lua** hjÃ¤lper.
- Stora system: **bibliotek/ramverk** spar tid men Ã¶kar underhÃ¥ll och beroenden.

## Checklista: â€œmin pipeline Ã¤r redoâ€

- [ ] VS Code Ã¤r installerat och jag har en Lua language serverâ€‘extension aktiv.
- [ ] Jag har en mappstruktur (`scripts/`, `libs/`, osv.) och hittar snabbt.
- [ ] Jag vet hur scripts ska in i uppdraget (`DO SCRIPT` / `DO SCRIPT FILE`).
- [ ] Jag har en plan fÃ¶r att verifiera resultat (meddelanden/loggar/beteende).
- [ ] Jag vet vilken riktning jag vill utforska (vanlig Lua, MIST, eller MOOSE).

## NÃ¤sta steg

I nÃ¤sta kapitel skriver vi de minsta nyttiga scriptsen och bygger en stabil â€œÃ¤ndra â†’ kÃ¶r â†’ verifieraâ€â€‘loop med minimal kod.

## Navigering

FÃ¶regÃ¥ende: [Kapitel 01](ch01.sv.md)
